{% extends 'empresa/base.html' %}
{% load static %}
{% load svg_tags %}

{% block title %}{{ empresa.nombre|default:"TK REDLINE SPA" }} - Soluciones Eficientes en Ingeniería{% endblock %}

{% block extra_css %}
{{ block.super }}
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const track = document.querySelector('.logo-track');
    if (!track) {
        return;
    }
    track.innerHTML = track.innerHTML + track.innerHTML;
});
</script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-br from-base-200 to-base-300 text-base-content py-16 md:py-20 relative overflow-hidden min-h-[360px] md:min-h-[460px] {% if empresa and empresa.imagen_fondo_hero or configuracion and configuracion.fondo_global %} from-transparent to-transparent bg-none {% endif %}" style="margin-top: 64px;">
    {% if empresa and empresa.imagen_fondo_hero %}
    <div class="absolute inset-0 z-0">
        <img src="{{ empresa.imagen_fondo_hero.url }}" alt="Fondo TEKON" class="w-full h-full object-cover opacity-90 hero-bg-image">
    </div>
    {% elif configuracion and configuracion.fondo_global %}
    <div class="absolute inset-0 z-0">
        <img src="{{ configuracion.fondo_global.url }}" alt="Fondo TEKON" class="w-full h-full object-cover hero-bg-image">
    </div>
    {% endif %}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="space-y-8">
                <div class="space-y-4">
                    <h1 class="text-5xl lg:text-6xl font-bold leading-tight">
                        <span class="text-primary">SOLUCIONES</span><br>
                        <span class="text-base-content">EFICIENTES</span>
                    </h1>
                    <div class="w-20 h-1 bg-primary"></div>
                </div>
                <p class="text-xl text-base-content/70 leading-relaxed">
                    {% if empresa %}
                        {{ empresa.descripcion }}
                    {% else %}
                        Especializados en la prestación de servicios generales para el desarrollo de proyectos de ingeniería, construcción, supervisión, fiscalización y capacitación de personal.
                    {% endif %}
                </p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="{% url 'empresa:contacto' %}" class="btn btn-primary btn-lg">
                        Contáctanos
                    </a>
                    <a href="{% url 'empresa:servicios' %}" class="btn btn-outline btn-lg">
                        Nuestros Servicios
                    </a>
                </div>
            </div>
            <div class="text-center">
                <div class="relative inline-block w-full max-w-lg mx-auto">

                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 60" preserveAspectRatio="xMidYMid meet" class="absolute inset-0 m-auto w-5/6 md:w-full h-auto text-base-content pointer-events-none">
                        <path d="m54.118 49.023-7.84-.168 3.2-.367c2.28-.261 16.285-.353 48.72-.32 25.036.026 45.52-.06 45.52-.193 0-.132 1.584-.24 3.52-.24 2.133 0 3.52.126 3.52.32 0 .176.792.32 1.76.32s1.76-.144 1.76-.32c0-.19 1.226-.32 3.04-.32 1.813 0 3.04.13 3.04.32 0 .183.96.32 2.24.32s2.24-.137 2.24-.32c0-.188 1.018-.307 2.48-.288 1.588.02 2.192.115 1.68.263-.599.173-.215.29 1.525.468 2.618.267 4.634-.09 2.635-.467-1.01-.19-.955-.216.56-.254.934-.023 1.68.1 1.68.278 0 .176.495.32 1.1.32s1.19-.144 1.3-.32c.124-.2 2.846-.298 7.298-.262 4.246.035 6.136.131 4.702.24-2.297.175-2.34.192-.98.4 1.833.28 4.71-.034 4.122-.451-.276-.196.02-.236.858-.117.704.101 1.496.187 1.76.192.426.007.426.043 0 .323-.332.217-.134.24.64.075 1.941-.415 46.953-.294 47.375.128.276.276-1.642.401-7.744.507-3.924.068-25.59.105-52.694.117-51.548.022-129.017-.05-129.017-.184m73.843-1.194c.398-.076.974-.074 1.28.006s-.02.143-.723.14c-.704-.005-.955-.07-.557-.146z" style="fill:#dc2626" transform="translate(-21.454 -6.174)" />
                        <path d="M19.023 10.796q0 .046-.017.082-.018.035-.076.058-.059.024-.164.035t-.282.012q-.152 0-.252-.012-.093-.011-.152-.035-.059-.03-.094-.076-.029-.047-.052-.117l-.698-1.787q-.123-.305-.257-.557-.13-.258-.311-.44-.182-.187-.428-.286-.246-.106-.592-.106h-.673v3.229q0 .046-.03.082-.023.035-.082.058-.052.018-.152.03-.094.017-.24.017-.147 0-.246-.017-.094-.012-.153-.03-.058-.023-.082-.058-.023-.036-.023-.082v-7.02q0-.228.117-.316.123-.094.258-.094h1.611q.287 0 .475.018.193.011.345.029.44.076.774.24.34.164.568.416.229.252.34.58.117.322.117.715 0 .38-.105.686-.1.298-.293.533-.194.228-.463.398-.27.17-.604.287.188.082.34.211.153.123.282.299.134.176.251.404.118.229.235.516l.68 1.67q.082.21.105.299.023.082.023.129m-1.517-5.327q0-.445-.2-.75-.199-.31-.667-.445-.147-.04-.334-.058-.182-.018-.48-.018h-.85v2.555h.984q.398 0 .686-.094.293-.1.486-.27.193-.175.281-.41.094-.234.094-.51m7.154 2.467q0 .229-.117.328-.111.094-.258.094h-3.457q0 .44.088.791t.293.604.533.386.803.135q.375 0 .668-.058.293-.065.504-.141.217-.076.351-.135.141-.064.211-.064.041 0 .07.023.036.018.053.059t.024.117q.011.07.011.176 0 .076-.005.134-.006.053-.018.1-.006.041-.03.076-.017.035-.052.07-.03.03-.188.106-.158.07-.41.14t-.586.124q-.328.058-.703.058-.65 0-1.142-.181-.487-.182-.82-.54-.335-.357-.505-.896t-.17-1.254q0-.68.176-1.219.176-.544.504-.92.334-.38.803-.58.469-.205 1.049-.205.62 0 1.054.2.44.199.721.539.281.334.41.79.135.452.135.967zm-.973-.287q.018-.762-.34-1.195-.35-.434-1.048-.434-.358 0-.627.135-.27.135-.451.357-.182.223-.282.522-.1.293-.11.615zm6.961 3.152q0 .047-.023.083-.018.035-.07.058-.047.018-.13.03-.081.011-.198.011-.123 0-.206-.012-.082-.011-.134-.029-.053-.023-.076-.058-.024-.036-.024-.083v-.697q-.416.451-.867.703-.445.252-.979.252-.58 0-.99-.222-.41-.229-.668-.61-.252-.386-.369-.902-.117-.522-.117-1.096 0-.68.146-1.224.147-.551.434-.938t.709-.592q.428-.21.984-.21.463 0 .844.204.387.2.762.592V2.997q0-.041.017-.076.024-.041.082-.059.059-.023.147-.035.094-.018.234-.018.147 0 .24.018.094.012.147.035.053.018.076.059.03.035.03.076zm-.972-3.709q-.393-.486-.762-.738-.363-.258-.762-.258-.369 0-.627.176-.257.176-.421.463-.159.287-.235.65-.07.364-.07.739 0 .398.058.779.065.38.217.68.153.293.405.474.251.176.632.176.194 0 .37-.053.181-.052.369-.175.187-.123.392-.317.205-.199.434-.486z" aria-label="Red" style="font-family:Calibri;-inkscape-font-specification:Calibri;white-space:pre;fill:#dc2626;stroke-width:151.6" transform="translate(24.477 -7.229)scale(4.12)" />
                        <path d="M17.898 10.509q0 .117-.011.199-.012.076-.041.134-.024.053-.065.083-.035.023-.088.023h-3.351q-.135 0-.258-.088-.117-.094-.117-.322v-7.02q0-.047.023-.082.024-.035.082-.052.059-.024.158-.036.1-.017.24-.017.147 0 .24.017.1.012.16.036.058.017.081.052.024.035.024.082v6.557h2.718q.053 0 .088.03.041.023.065.075.029.047.04.13.012.081.012.199" aria-label="L" style="font-family:Calibri;-inkscape-font-specification:Calibri;white-space:pre;stroke-width:151.6;fill:currentColor" transform="translate(99.134 -7.385)scale(4.12)" />
                        <path d="M14.822 10.801q0 .047-.023.083-.024.029-.076.052-.053.024-.147.035t-.24.012q-.14 0-.234-.012-.094-.011-.153-.035-.053-.023-.076-.052-.018-.036-.018-.083V5.528q0-.041.018-.076.023-.035.076-.059.059-.023.153-.035.093-.012.234-.012.146 0 .24.012t.147.035.076.059.023.076zm.112-7.054q0 .34-.13.463-.128.123-.474.123-.34 0-.469-.117-.123-.124-.123-.457 0-.34.13-.463.128-.123.474-.123.34 0 .463.123.129.117.129.45m6.965 7.054q0 .047-.023.083-.024.029-.076.052-.053.024-.147.035t-.234.012q-.147 0-.24-.012-.094-.011-.147-.035-.053-.023-.076-.052-.024-.036-.024-.083V7.714q0-.452-.07-.727t-.205-.475q-.135-.199-.352-.304-.21-.106-.492-.106-.363 0-.726.258-.364.258-.762.756V10.8q0 .047-.023.083-.024.029-.077.052-.052.024-.146.035t-.24.012q-.141 0-.235-.012-.093-.011-.152-.035-.053-.023-.076-.052-.018-.036-.018-.083V5.528q0-.047.018-.076.017-.035.07-.059.053-.029.135-.035.082-.012.217-.012.129 0 .21.012.088.006.135.035.047.024.065.059.023.03.023.076v.697q.446-.498.885-.726.445-.235.896-.235.528 0 .885.182.364.176.586.475.223.298.317.703.1.398.1.96zm7.013-2.865q0 .229-.118.328-.11.094-.257.094H25.08q0 .44.087.791.088.352.293.604.206.252.534.386.328.135.802.135.375 0 .668-.058.293-.065.504-.141.217-.076.352-.135.14-.064.21-.064.042 0 .071.023.035.018.053.059t.023.117q.012.07.012.176 0 .076-.006.134-.006.053-.017.1-.006.041-.03.076-.017.035-.053.07-.029.03-.187.106-.158.07-.41.14t-.586.124q-.328.058-.703.058-.65 0-1.143-.181-.486-.182-.82-.54-.334-.357-.504-.896t-.17-1.254q0-.68.176-1.219.176-.544.504-.92.334-.38.803-.58.468-.205 1.048-.205.621 0 1.055.2.44.199.72.539.282.334.41.79.136.452.136.967zm-.973-.287q.018-.762-.34-1.195-.351-.434-1.049-.434-.357 0-.627.135t-.45.357-.282.522q-.1.293-.111.615z" aria-label="ine" style="font-family:Calibri;-inkscape-font-specification:Calibri;letter-spacing:.748789px;white-space:pre;stroke-width:151.6;fill:currentColor" transform="translate(134.723 .16)scale(2.98)" />
                        <g aria-label="TEKON" style="font-family:Calibri;-inkscape-font-specification:Calibri;letter-spacing:0;white-space:pre;stroke-width:151.6">
                            <path d="M10.525 11.457v6.914H8.37v-6.914H5.404V9.705h8.086v1.752z" style="font-weight:700;font-stretch:expanded;font-family:&quot;Swis721 Ex BT&quot;;-inkscape-font-specification:&quot;Swis721 Ex BT Bold Expanded&quot;;fill:currentColor" transform="matrix(.87 0 0 .87 31.538 21.788)" />
                            <path d="M14.404 18.371V9.705h7.694v1.752h-5.52v1.465h4.916v1.764h-4.916v1.863h5.52v1.822z" style="font-weight:700;font-stretch:expanded;font-family:&quot;Swis721 Ex BT&quot;;-inkscape-font-specification:&quot;Swis721 Ex BT Bold Expanded&quot;;fill:#dc2626" transform="matrix(.87 0 0 .87 31.538 21.788)" />
                            <path d="M23.51 18.371V9.705h2.174v3.328l3.644-3.328h2.795l-3.814 3.363 4.283 5.303h-2.66l-3.147-3.973-1.101.973v3zm13.974-1.558q1.301 0 2.045-.739.75-.744.75-2.033 0-1.3-.75-2.039-.744-.744-2.045-.744t-2.056.744q-.75.744-.75 2.039 0 1.29.75 2.033.75.738 2.056.738m-5.197-2.772q0-2.08 1.412-3.322t3.785-1.242 3.78 1.242 1.406 3.322-1.406 3.322q-1.407 1.237-3.78 1.237T33.7 17.363q-1.412-1.242-1.412-3.322m11.871 4.33V9.705h2.666l4.33 6.111v-6.11h2.086v8.665h-2.636l-4.372-6.17v6.17z" style="font-weight:700;font-stretch:expanded;font-family:&quot;Swis721 Ex BT&quot;;-inkscape-font-specification:&quot;Swis721 Ex BT Bold Expanded&quot;;fill:currentColor" transform="matrix(.87 0 0 .87 31.538 21.788)" />
                        </g>
                        <g transform="translate(2.747 16.61)scale(1.09)">
                            <ellipse cx="22.651" cy="14.99" rx=".538" ry=".543" style="fill:none;fill-opacity:1;stroke:currentColor;stroke-width:5.78695;stroke-dasharray:none;stroke-opacity:1" />
                            <path d="M22.651 18.397v3.472M22.651 8.196v3.472M26.005 15.085h3.473M15.779 15.085h3.472" style="fill:#dc2626;fill-opacity:1;stroke:currentColor;stroke-width:.9;stroke-dasharray:none;stroke-opacity:1" />
                        </g>
                        <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:expanded;font-family:&quot;Swis721 Ex BT&quot;;-inkscape-font-specification:&quot;Swis721 Ex BT Bold Expanded&quot;;text-align:start;letter-spacing:2.49529px;writing-mode:lr-tb;direction:ltr;white-space:pre;shape-inside:url(#a);display:inline;fill:currentColor;fill-opacity:1;stroke:none;stroke-width:.7;stroke-dasharray:none;stroke-opacity:1" transform="matrix(.76 0 0 .76 -20 -1.575)">
                            <tspan x="-170" y="71.592">
                                <tspan style="font-weight:300;font-stretch:normal;font-family:Calibri;-inkscape-font-specification:&quot;Calibri Light&quot;;fill:currentColor;stroke:none">Ingeniería &amp; Supervisión</tspan>
                            </tspan>
                        </text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Servicios Destacados -->
<section class="py-20 bg-base-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl lg:text-5xl font-bold text-base-content mb-6">Nuestros Servicios</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-6"></div>
            <p class="text-xl text-base-content/70 max-w-3xl mx-auto">
                Ofrecemos soluciones integrales en ingeniería, construcción y supervisión con más de 21 años de experiencia.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for servicio in servicios %}
            <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-all duration-300 p-8 text-center group border border-base-300 hover:border-primary/30">
                <div class="w-20 h-20 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 group-hover:bg-primary/20 transition-all duration-300">
                    {% if servicio.icono %}
                        {% render_svg servicio.icono "h-12 w-12 sombra" %}
                    {% else %}
                        <i class="fas fa-cogs text-primary text-2xl"></i>
                    {% endif %}
                </div>
                <h3 class="text-xl font-bold text-base-content mb-4 group-hover:text-primary transition-colors duration-300">{{ servicio.nombre }}</h3>
                <p class="text-base-content/70 leading-relaxed">{{ servicio.descripcion|truncatewords:20 }}</p>
            </div>
            {% empty %}
            <div class="col-span-full text-center py-12">
                <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-tools text-primary text-3xl"></i>
                </div>
                <p class="text-base-content/70 text-lg">Los servicios se están cargando...</p>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'empresa:servicios' %}" class="btn btn-primary btn-lg">
                Ver Todos los Servicios
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Proyectos Destacados -->
{% if proyectos_destacados %}
<section class="py-20 bg-base-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl lg:text-5xl font-bold text-base-content mb-6">Proyectos Destacados</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-6"></div>
            <p class="text-xl text-base-content/70 max-w-3xl mx-auto">
                Algunos de nuestros proyectos más importantes que demuestran nuestra experiencia y calidad.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for proyecto in proyectos_destacados %}
            <div class="sombra card bg-base-100 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group border border-base-300 hover:border-primary/30 relative">
                {% if proyecto.imagen %}
                    <div class="h-48 overflow-hidden relative">
                        <img src="{{ proyecto.imagen.url }}" alt="{{ proyecto.nombre }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </div>
                {% else %}
                    <div class="h-48 bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center group-hover:from-primary/30 group-hover:to-primary/20 transition-all duration-300">
                        <i class="fas fa-project-diagram text-primary text-4xl"></i>
                    </div>
                {% endif %}
                <div class="card-body p-6">
                    <h3 class="card-title text-base-content mb-3 group-hover:text-primary transition-colors duration-300">{{ proyecto.nombre }}</h3>
                    <p class="text-base-content/70 mb-4">{{ proyecto.descripcion|truncatewords:15 }}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-primary font-semibold text-sm">{{ proyecto.cliente_mostrado }}</span>
                    </div>
                </div>
                <div class="absolute bottom-4 right-4 max-w-[100px]">
                    {% if proyecto.cliente_rel and proyecto.cliente_rel.logo %}
                        <img src="{{ proyecto.cliente_rel.logo.url }}" alt="{{ proyecto.cliente_mostrado }}" class="h-14 w-auto object-contain drop-shadow-lg">
                    {% else %}
                        <div class="px-4 py-2 bg-primary/15 border border-primary/40 rounded-lg shadow-lg">
                            <span class="text-primary font-semibold text-xs uppercase tracking-[0.18em]">{{ proyecto.cliente_mostrado|default:'Cliente' }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'empresa:proyectos' %}" class="btn btn-outline btn-lg">
                Todos los Proyectos
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Clientes -->
{% if clientes %}
<section class="py-20 bg-base-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl lg:text-5xl font-bold text-base-content mb-6">Nuestros Clientes</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-6"></div>
            <p class="text-xl text-base-content/70 max-w-3xl mx-auto">
                Confiamos en la calidad de nuestro trabajo y nuestros clientes lo confirman.
            </p>
        </div>
        
        <div class="logo-slider">
            <div class="logo-track">
                {% for cliente in clientes %}
                <img src="{{ cliente.logo.url }}" alt="{{ cliente.nombre }}" loading="lazy">
                {% endfor %}
            </div>
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'empresa:clientes' %}" class="btn btn-outline btn-lg">
                Clientes
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Estadísticas -->
<section class="py-20 bg-base-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div class="stat bg-base-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-base-300 hover:border-primary/30">
                <div class="stat-value text-primary text-4xl font-bold">21+</div>
                <div class="stat-title text-base-content/70 font-semibold">Años de Experiencia</div>
            </div>
            <div class="stat bg-base-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-base-300 hover:border-primary/30">
                <div class="stat-value text-primary text-4xl font-bold">120+</div>
                <div class="stat-title text-base-content/70 font-semibold">Proyectos Completados</div>
            </div>
            <div class="stat bg-base-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-base-300 hover:border-primary/30">
                <div class="stat-value text-primary text-4xl font-bold">50+</div>
                <div class="stat-title text-base-content/70 font-semibold">Clientes Satisfechos</div>
            </div>
            <div class="stat bg-base-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-base-300 hover:border-primary/30">
                <div class="stat-value text-primary text-4xl font-bold">3</div>
                <div class="stat-title text-base-content/70 font-semibold">Países en Operación</div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-20 bg-primary text-primary-content">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <h2 class="text-4xl lg:text-5xl font-bold">¿Listo para tu próximo proyecto?</h2>
                <p class="text-xl text-primary-content/80 leading-relaxed">
                    Contáctanos hoy mismo y descubre cómo podemos ayudarte a alcanzar tus objetivos con soluciones eficientes y profesionales.
                </p>
            </div>
            <div class="text-center lg:text-right">
                <a href="{% url 'empresa:contacto' %}" class="btn btn-secondary btn-lg">
                    Comenzar Ahora
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}
